app: scancodeio

ingredients:
  dist: bionic
  sources:
    - deb http://us.archive.ubuntu.com/ubuntu/ bionic main universe
    - deb http://us.archive.ubuntu.com/ubuntu/ bionic-updates main universe
    - deb http://us.archive.ubuntu.com/ubuntu/ bionic-security main universe
  packages:
    - bzip2
    - xz-utils
    - zlib1g
    - libxml2-dev
    - libxslt1-dev
    - libpopt0

script:
  - env
  - mkdir -p usr/share/scancodeio
  - wget -c https://github.com/nexB/scancode.io/archive/refs/heads/scancode.io-appimage.tar.gz -O - | tar xz --directory=./usr/share/scancodeio --strip-components=1
  - make -f ../../Makefile envfile
  - mv .env ./usr/share/scancodeio/.env
  - cp ../../resources/python.png .
  - tar xz --directory=./usr -f ../../Python-3.10-linux-x86_64-support.custom.tar.gz
  - ./usr/bin/python3.10 -m ensurepip
  - ./usr/bin/python3.10 -m pip install ./usr/share/scancodeio
  - ./usr/bin/python3.10 -m pip install --upgrade https://github.com/nexB/python-inspector/archive/refs/heads/update-cache-location.zip
  - ./usr/bin/python3.10 -m pip install --upgrade packaging==21.3
  - cp ../../resources/scancodeio.desktop .
  - cp ../../resources/scancodeio.desktop usr/share/applications/scancodeio.desktop
