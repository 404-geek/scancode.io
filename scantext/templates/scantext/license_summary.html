{% extends 'scanpipe/base.html' %}
{% load static humanize %}

{% block extrahead %}
<style>
    {% for mcolor in detected_licenses.match_colors %}{{ mcolor }}{% endfor %}

    .license-match {
        font-size: 18px;
        white-space: pre-wrap;
        max-height: 80vh;
        overflow: scroll;
        border: 1px solid #efefef;
        border-radius: 4px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container is-widescreen">
    {% include 'scanpipe/includes/navbar_header.html' %}

    {% include 'scantext/includes/license_summary_header.html' with detected_licenses=detected_licenses %}
    <hr class="mx-1">

    <section class="tab-container">
        {% include 'scantext/includes/license_summary_detail.html' with detected_licenses=detected_licenses %}
    </section>

</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript">
    const detailBtns = document.querySelectorAll('.license-details-btn')
    const modalCards = document.querySelectorAll('.license-details-modal')
    const closeModalBtns = document.querySelectorAll('.license-details-close-modal')

    detailBtns.forEach((btn, index) => {
        btn.addEventListener('click', (e) => {
            e.preventDefault()
            modalCards.forEach(modalcard => {
              modalcard.style.display= 'none'
            })
            modalCards[index].style.display= 'block'
        })
    })

    closeModalBtns.forEach((btn, index) => {
        btn.addEventListener('click', (e) => {
            e.preventDefault()
            modalCards[index].style.display = 'none'
        })
    })
</script>
{% endblock %}